<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- ‚úÖ Title & Description -->
  <title>Snack Inn | Kenyan & International Snacks</title>
  <meta name="description" content="Snack Inn brings you the tastiest Kenyan and international snacks. Order now from Mombasa‚Äôs finest snack hub!">
  <meta name="keywords" content="Snack Inn, Kenyan snacks, Mombasa food, street food Kenya, mandazi, samosa, fast food delivery, snacks online, snack shop" />
  <meta name="author" content="Dummy | Snack Inn Team" />

  <!-- ‚úÖ Favicon -->
  <link rel="icon" type="image/png" href="/images/snackinn logo.png" />

  <!-- ‚úÖ Open Graph for Social Sharing -->
  <meta property="og:title" content="Snack Inn | Kenyan & International Snacks" />
  <meta property="og:description" content="Explore and order delicious snacks from Mombasa and beyond. All your faves in one place!" />
  <meta property="og:image" content="https://snackinn.netlify.app/images/snackinn-banner.jpg" /> <!-- üîÅ Replace with real image if available -->
  <meta property="og:url" content="https://snackinn.netlify.app" />
  <meta property="og:type" content="website" />

  <!-- ‚úÖ Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Snack Inn | Street Food & Snacks" />
  <meta name="twitter:description" content="Order your favorite Kenyan and international snacks online with Snack Inn." />
  <meta name="twitter:image" content="https://snackinn.netlify.app/images/snackinn-banner.jpg" />

  <!-- ‚úÖ Fonts & Styles -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Chewy&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ‚úÖ Firebase + Cart Utils -->
  <script type="module" src="snackinn-firebase.js"></script>
  <script type="module" src="cart-utils.js"></script>
    <style>
        :root {
            --primary: #FF6B35;
            --secondary: #EFEFD0;
            --accent: #FFD166;
            --dark: #1A1A1A;
            --light: #F7FFF7;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--secondary);
        }
        
        .logo-font {
            font-family: 'Chewy', cursive;
        }
        
        .hero-pattern {
            background-image: radial-gradient(circle, rgba(255,214,102,0.2) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .snack-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .recipe-card:hover img {
            transform: scale(1.05);
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        .cart-item-enter {
            opacity: 0;
            transform: translateX(-20px);
        }
        
        .cart-item-enter-active {
            opacity: 1;
            transform: translateX(0);
            transition: all 300ms ease-in;
        }
        
        .cart-item-exit {
            opacity: 1;
        }
        
        .cart-item-exit-active {
            opacity: 0;
            transform: translateX(20px);
            transition: all 300ms ease-in;
        }

         #register-modal[style*="display: flex"] {
    display: flex !important;
  }

        #login-modal[style*="display: flex"] {
            display: flex !important;
        }

        #enhanced-mobile-menu[style*="display: block"] {
            display: block !important;
        }
        
        #enhanced-mobile-menu-panel[style*="transform: translateX(0)"] {
            transform: translateX(0) !important;
        }

          html, body {
    overflow-x: hidden;
  }

        @media (max-width: 768px) {
            .hero-pattern {
                background-size: 40px 40px;
            }
        }

        @media (min-width: 1024px) {
            .hero-pattern {
                background-size: 60px 60px;
            }
        }
    </style>
</head>
<body class="bg-gray-50 overflow-x-hidden">
    <!-- üüß BEGIN: Updated Mobile Menu + JS Fix for Snack Inn -->
<!-- Navigation -->
<nav class="bg-white shadow-md fixed top-0 left-0 w-full z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center py-4 flex-wrap">
      <!-- Logo -->
      <div class="flex items-center space-x-2">
        <div class="text-3xl text-orange-500">
          <i class="fas fa-pizza-slice"></i>
        </div>
        <a href="#" class="logo-font text-3xl text-orange-500 whitespace-nowrap">Snack Inn</a>
      </div>

      <!-- Mobile Toggle -->
      <div class="md:hidden">
        <button id="mobile-menu-button" class="text-orange-500 focus:outline-none">
          <i class="fas fa-bars text-2xl"></i>
        </button>
      </div>

      <!-- Desktop Menu -->
      <div class="hidden md:flex flex-wrap justify-end items-center gap-4 lg:gap-6 ml-auto">
        <a href="#home" class="text-orange-500 font-semibold hover:text-orange-600 whitespace-nowrap">Home</a>
        <a href="#shop" class="text-gray-700 hover:text-orange-500 whitespace-nowrap">Shop</a>
        <a href="#recipes" class="text-gray-700 hover:text-orange-500 whitespace-nowrap">Recipes</a>
        <a href="#blog" class="text-gray-700 hover:text-orange-500 whitespace-nowrap">Blog</a>
        <a href="#about" class="text-gray-700 hover:text-orange-500 whitespace-nowrap">About Us</a>
        <a href="#contact" class="text-gray-700 hover:text-orange-500 whitespace-nowrap">Contact</a>

        <a href="dashboard.html" id="user-welcome" class="hidden text-orange-500 font-semibold hover:underline whitespace-nowrap"></a>

        <button id="login-btn" class="px-4 py-2 text-orange-500 border border-orange-500 rounded-full hover:bg-orange-500 hover:text-white transition whitespace-nowrap">
          Login
        </button>

        <button id="cart-btn" type="button" class="relative text-gray-700 hover:text-orange-500 whitespace-nowrap" aria-label="View cart">
          <i class="fas fa-shopping-cart text-2xl"></i>
          <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full px-2">0</span>
        </button>
      </div>
    </div>
  </div>
</nav>

<!-- Cart Popup (desktop & mobile, unified) -->
<div id="cart-popup" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
  <div class="bg-white rounded-xl p-6 w-full max-w-lg relative shadow-2xl max-h-[80vh] overflow-y-auto">
    <button id="close-cart-popup" class="absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl">&times;</button>
    <h3 class="text-2xl font-bold mb-4">Your Cart</h3>
    <div class="cart-items space-y-4"></div>
    <div class="mt-6 border-t pt-4 flex justify-between items-center">
      <span class="text-lg font-semibold">Total: <span class="cart-total">KSh 0</span></span>
      <div class="flex gap-2">
        <button id="checkout-btn-popup" class="bg-green-600 text-white px-4 py-2 rounded">Checkout</button>
        <button onclick="clearCart()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Clear All</button>
      </div>
    </div>
  </div>
</div>
<!-- ‚úÖ Enhanced Mobile Menu (only one version now) -->
<div id="enhanced-mobile-menu" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden md:hidden transition-opacity duration-300 ease-in-out">
  <div id="enhanced-mobile-menu-panel" class="absolute right-0 top-0 h-full w-4/5 bg-white shadow-xl transform transition-transform duration-300 ease-in-out translate-x-full">
    <div class="p-4 flex justify-between items-center border-b">
      <div class="flex items-center space-x-2">
        <div class="text-2xl text-orange-500">
          <i class="fas fa-pizza-slice"></i>
        </div>
        <span class="logo-font text-2xl text-orange-500">Snack Inn</span>
      </div>
      
      <button id="close-enhanced-menu" class="text-gray-500 hover:text-orange-500 text-2xl">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="overflow-y-auto h-full pb-20">
      <nav class="space-y-1 p-4">
        <a href="#home" class="flex items-center py-3 px-4 text-orange-600 bg-orange-50 rounded-lg font-medium">
          <i class="fas fa-home mr-3 text-lg"></i> Home
        </a>
        <a href="#shop" class="flex items-center py-3 px-4 text-gray-700 hover:text-orange-600 hover:bg-orange-50 rounded-lg font-medium">
          <i class="fas fa-shopping-bag mr-3 text-lg"></i> Shop
        </a>
        <a href="#recipes" class="flex items-center py-3 px-4 text-gray-700 hover:text-orange-600 hover:bg-orange-50 rounded-lg font-medium">
          <i class="fas fa-utensils mr-3 text-lg"></i> Recipes
        </a>
        <a href="#blog" class="flex items-center py-3 px-4 text-gray-700 hover:text-orange-600 hover:bg-orange-50 rounded-lg font-medium">
          <i class="fas fa-newspaper mr-3 text-lg"></i> Blog
        </a>
        <a href="#about" class="flex items-center py-3 px-4 text-gray-700 hover:text-orange-600 hover:bg-orange-50 rounded-lg font-medium">
          <i class="fas fa-info-circle mr-3 text-lg"></i> About Us
        </a>
        <a href="#contact" class="flex items-center py-3 px-4 text-gray-700 hover:text-orange-600 hover:bg-orange-50 rounded-lg font-medium">
          <i class="fas fa-envelope mr-3 text-lg"></i> Contact
        </a>
      </nav>

      <!-- Mobile Action & Auth Buttons (no duplication, unique IDs) -->
      <div class="mt-4 p-4 border-t space-y-2 md:hidden">
        <!-- Welcome (when logged in) -->
        <a href="dashboard.html" id="mobile-user-welcome"
           class="hidden block text-orange-500 font-semibold text-center hover:underline">
          Welcome, User
        </a>
        <!-- Login Button (when logged out) -->
        <button id="mobile-login-btn-auth" class="w-full flex items-center justify-center py-3 px-4 mb-3 bg-orange-500 text-white rounded-lg font-bold hover:bg-orange-600">
          <i class="fas fa-sign-in-alt mr-2"></i> Login
        </button>
        <!-- Register Button (when logged out) -->
        <button id="mobile-register-btn-auth" class="w-full flex items-center justify-center py-3 px-4 border border-orange-500 text-orange-500 rounded-lg font-bold hover:bg-orange-50">
          <i class="fas fa-user-plus mr-2"></i> Register
        </button>
        <!-- Logout Button (when logged in) -->
        <button id="mobile-logout-btn"
          class="hidden w-full flex items-center justify-center py-3 px-4 mt-2 bg-red-500 text-white rounded-lg font-bold hover:bg-red-600 transition-all duration-200">
          <i class="fas fa-sign-out-alt mr-2"></i> Logout
        </button>
        <!-- Cart Button -->
        <button id="mobile-cart-btn" type="button" class="w-full flex items-center justify-center py-3 px-4 mt-3 bg-gray-100 text-gray-700 rounded-lg font-bold hover:bg-gray-200">
          <i class="fas fa-shopping-cart mr-2"></i> Cart (<span id="mobile-cart-count">0</span>)
        </button>
      </div>
    </div>
    </div>
  </div>
</div>

    <!-- Hero Section -->
    <section id="home" class="hero-pattern bg-gradient-to-r from-orange-50 to-yellow-50 py-16">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-8 md:mb-0">
                    <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-orange-600 mb-4 logo-font">sneak in üòâ snack inn üçü</h1>
                    <p class="text-lg text-gray-700 mb-6">Discover the tastiest Kenyan & international snacks delivered straight to your door. Try our subscription boxes for a weekly surprise!</p>
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                        <a href="#shop" class="px-6 py-3 bg-orange-500 text-white rounded-full font-semibold hover:bg-orange-600 text-center transition">Shop Now</a>
                        <a href="#subscriptions" class="px-6 py-3 border border-orange-500 text-orange-500 rounded-full font-semibold hover:bg-orange-50 text-center transition">Subscription Plans</a>
                    </div>
                </div>
                <div class="md:w-1/2 relative">
                    <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80" alt="Delicious snacks" class="rounded-lg shadow-xl w-full max-w-md mx-auto floating">
                    <div class="absolute -bottom-4 -left-4 bg-white p-3 rounded-lg shadow-md">
                        <div class="flex items-center">
                            <div class="bg-orange-100 p-2 rounded-full mr-2">
                                <i class="fas fa-truck text-orange-500"></i>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500">Free delivery</p>
                                <p class="text-sm font-semibold">Within Mombasa</p>
                            </div>
                        </div>
                    </div>
                    <div class="absolute -top-4 -right-4 bg-white p-3 rounded-lg shadow-md">
                        <div class="flex items-center">
                            <div class="bg-green-100 p-2 rounded-full mr-2">
                                <i class="fas fa-bolt text-green-500"></i>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500">Fast delivery</p>
                                <p class="text-sm font-semibold">Under 60 mins</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
<section class="py-12 bg-white">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12">Snack Categories</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">

      <a href="fast-food.html">
        <div class="bg-orange-50 rounded-xl p-6 text-center hover:bg-orange-100 transition cursor-pointer">
          <div class="bg-white p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-hamburger text-3xl text-orange-500"></i>
          </div>
          <h3 class="font-semibold text-lg">Fast Food</h3>
          <p class="text-sm text-gray-600 mt-1">Burgers, fries & more</p>
        </div>
      </a>

      <a href="kenyan.html">
        <div class="bg-yellow-50 rounded-xl p-6 text-center hover:bg-yellow-100 transition cursor-pointer">
          <div class="bg-white p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-utensils text-3xl text-yellow-500"></i>
          </div>
          <h3 class="font-semibold text-lg">Kenyan Delicacies</h3>
          <p class="text-sm text-gray-600 mt-1">Local favorites</p>
        </div>
      </a>

      <a href="desserts.html">
        <div class="bg-red-50 rounded-xl p-6 text-center hover:bg-red-100 transition cursor-pointer">
          <div class="bg-white p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-ice-cream text-3xl text-red-500"></i>
          </div>
          <h3 class="font-semibold text-lg">Desserts</h3>
          <p class="text-sm text-gray-600 mt-1">Sweet treats</p>
        </div>
      </a>

      <a href="international.html">
        <div class="bg-blue-50 rounded-xl p-6 text-center hover:bg-blue-100 transition cursor-pointer">
          <div class="bg-white p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-globe-africa text-3xl text-blue-500"></i>
          </div>
          <h3 class="font-semibold text-lg">International</h3>
          <p class="text-sm text-gray-600 mt-1">Global flavors</p>
        </div>
      </a>

    </div>
  </div>
</section>


    <!-- Featured Products -->
    <section id="shop" class="py-12 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Featured Snacks</h2>
                <a href="shop.html" class="text-orange-500 font-semibold hover:underline">View All</a>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Product 1 -->
                <div class="snack-card bg-white rounded-xl overflow-hidden shadow-md transition duration-300">
                    <div class="relative">
                        <img src="/images/nyama-choma.jpg" alt="Nyama Choma" class="w-full h-48 object-cover">
                        <div class="absolute top-2 right-2 bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full">BESTSELLER</div>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start">
                            <h3 class="font-semibold text-lg">Nyama Choma Platter</h3>
                            <span class="text-orange-500 font-bold">KSh 850</span>
                        </div>
                        <p class="text-gray-600 text-sm mt-1">Juicy grilled meat with kachumbari</p>
                        <div class="flex items-center mt-2">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span class="text-gray-500 text-xs ml-1">(48)</span>
                        </div>
                        <button class="add-to-cart mt-4 w-full bg-orange-500 text-white py-2 rounded-full hover:bg-orange-600 transition" data-id="1" data-name="Nyama Choma Platter" data-price="850" data-image="/images/nyama-choma.jpg" aria-label="Add Nyama Choma Platter to cart">
                            Add to Cart
                        </button>
                    </div>
                </div>
                
                <!-- Product 2 -->
                <div class="snack-card bg-white rounded-xl overflow-hidden shadow-md transition duration-300">
                    <div class="relative">
                        <img src="/images/Maandazi _ Mahamri recipe _ How to make soft maandazi _mahamri _ Perfect maandazi _ Cuisines _.jpg" alt="Mandazi" class="w-full h-48 object-cover">
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start">
                            <h3 class="font-semibold text-lg">Mandazi Pack</h3>
                            <span class="text-orange-500 font-bold">KSh 100</span>
                        </div>
                        <p class="text-gray-600 text-sm mt-1">6 pieces of fluffy Kenyan donuts</p>
                        <div class="flex items-center mt-2">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                            <span class="text-gray-500 text-xs ml-1">(32)</span>
                        </div>
                        <button class="add-to-cart mt-4 w-full bg-orange-500 text-white py-2 rounded-full hover:bg-orange-600 transition" data-id="2" data-name="Mandazi Pack" data-price="250" data-image="/images/Maandazi _ Mahamri recipe _ How to make soft maandazi _mahamri _ Perfect maandazi _ Cuisines _.jpg" aria-label="Add Mandazi Pack to cart">
                            Add to Cart
                        </button>
                    </div>
                </div>
                
                <!-- Product 3 -->
                <div class="snack-card bg-white rounded-xl overflow-hidden shadow-md transition duration-300">
                    <div class="relative">
                        <img src="/images/Delicious BBQ Chicken Pizza Recipe.jpg" alt="Pizza" class="w-full h-48 object-cover">
                        <div class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">NEW</div>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start">
                            <h3 class="font-semibold text-lg">BBQ Chicken Pizza</h3>
                            <span class="text-orange-500 font-bold">KSh 1200</span>
                        </div>
                        <p class="text-gray-600 text-sm mt-1">12" pizza with smoky BBQ sauce</p>
                        <div class="flex items-center mt-2">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <span class="text-gray-500 text-xs ml-1">(15)</span>
                        </div>
                        <button class="add-to-cart mt-4 w-full bg-orange-500 text-white py-2 rounded-full hover:bg-orange-600 transition" data-id="3" data-name="BBQ Chicken Pizza" data-price="1200" data-image="/images/Delicious BBQ Chicken Pizza Recipe.jpg" aria-label="Add BBQ Chicken Pizza to cart">
                            Add to Cart
                        </button>
                    </div>
                </div>
                
                <!-- Product 4 -->
                <div class="snack-card bg-white rounded-xl overflow-hidden shadow-md transition duration-300">
                    <div class="relative">
                        <img src="/images/Beef Samosas.jpg" alt="Samosa" class="w-full h-48 object-cover">
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start">
                            <h3 class="font-semibold text-lg">Samosas</h3>
                            <span class="text-orange-500 font-bold">KSh 150</span>
                        </div>
                        <p class="text-gray-600 text-sm mt-1">Crispy beef and veggie samosas</p>
                        <div class="flex items-center mt-2">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span class="text-gray-500 text-xs ml-1">(27)</span>
                        </div>
                        <button class="add-to-cart mt-4 w-full bg-orange-500 text-white py-2 rounded-full hover:bg-orange-600 transition" data-id="4" data-name="Samosas (6pcs)" data-price="300" data-image="/images/Beef Samosas.jpg" aria-label="Add Samosas (6pcs) to cart">
                            Add to Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Subscription Plans -->
    <section id="subscriptions" class="py-12 bg-orange-50">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">Snack Subscription Boxes</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <!-- Weekly Plan -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden transition-transform hover:scale-105">
                    <div class="bg-orange-500 text-white py-4 px-6">
                        <h3 class="font-bold text-xl">Weekly Box</h3>
                        <p class="text-orange-100">Perfect for snack lovers</p>
                    </div>
                    <div class="p-6">
                        <div class="text-center mb-6">
                            <span class="text-4xl font-bold text-orange-500">KSh 2,500</span>
                            <span class="text-gray-500 block">per week</span>
                        </div>
                        <ul class="space-y-3 mb-8">
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>4-6 surprise snacks</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Mix of Kenyan & international</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Free delivery</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Exclusive recipes</span>
                            </li>
                        </ul>
                         <a href="https://wa.me/254741194979?text=I%20want%20to%20subscribe%20to%20the%20Monthly%20Box" target="_blank" class="block text-center bg-orange-500 text-white py-3 rounded-full font-semibold hover:bg-orange-600 transition">
  Subscribe Now
</a>
                    </div>
                </div>
                
                <!-- Monthly Plan -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden border-2 border-orange-500 relative transform hover:scale-105">
                    <div class="absolute top-0 right-0 bg-orange-500 text-white text-xs font-bold px-3 py-1 transform translate-x-2 -translate-y-2 rotate-6">POPULAR</div>
                    <div class="bg-orange-600 text-white py-4 px-6">
                        <h3 class="font-bold text-xl">Monthly Box</h3>
                        <p class="text-orange-100">Best value for money</p>
                    </div>
                    <div class="p-6">
                        <div class="text-center mb-6">
                            <span class="text-4xl font-bold text-orange-500">KSh 8,500</span>
                            <span class="text-gray-500 block">per month (save 15%)</span>
                        </div>
                        <ul class="space-y-3 mb-8">
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>16-20 surprise snacks</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Mix of Kenyan & international</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Free delivery</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Exclusive recipes</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Bonus snack each month</span>
                            </li>
                        </ul>
                         <a href="https://wa.me/254741194979?text=I%20want%20to%20subscribe%20to%20the%20Monthly%20Box" target="_blank" class="block text-center bg-orange-500 text-white py-3 rounded-full font-semibold hover:bg-orange-600 transition">
  Subscribe Now
</a>
                    </div>
                </div>
                
                <!-- Family Plan -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden transition-transform hover:scale-105">
                    <div class="bg-orange-500 text-white py-4 px-6">
                        <h3 class="font-bold text-xl">Family Box</h3>
                        <p class="text-orange-100">For sharing with loved ones</p>
                    </div>
                    <div class="p-6">
                        <div class="text-center mb-6">
                            <span class="text-4xl font-bold text-orange-500">KSh 12,000</span>
                            <span class="text-gray-500 block">per month</span>
                        </div>
                        <ul class="space-y-3 mb-8">
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>25-30 surprise snacks</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Mix of Kenyan & international</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Free delivery</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Exclusive recipes</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>2 bonus snacks each month</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span>Customizable preferences</span>
                            </li>
                        </ul>
                       <a href="https://wa.me/254741194979?text=I%20want%20to%20subscribe%20to%20the%20Monthly%20Box" target="_blank" class="block text-center bg-orange-500 text-white py-3 rounded-full font-semibold hover:bg-orange-600 transition">
  Subscribe Now
</a>

                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recipes Section -->
    <section id="recipes" class="py-12 bg-white">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Popular Recipes</h2>
                <a href="recipes.html" class="text-orange-500 font-semibold hover:underline">View All</a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Recipe 1 -->
                <div class="recipe-card bg-white rounded-xl overflow-hidden shadow-md transition duration-300">
                    <div class="relative overflow-hidden h-48">
                        <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80" alt="Chapati" class="w-full h-full object-cover transition duration-500">
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-start">
                            <h3 class="font-semibold text-lg">Perfect Kenyan Chapati</h3>
                            <div class="flex items-center bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">
                                <i class="fas fa-clock mr-1"></i>
                                <span>45 mins</span>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm mt-1">Flaky, layered flatbread that's perfect with stews</p>
                        <div class="flex items-center mt-3">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span class="text-gray-500 text-xs ml-1">(36)</span>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-500">By Chef Wanjiru</span>
                                <a href="#recipe-detail" class="text-orange-500 text-sm font-semibold hover:underline">View Recipe</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recipe 2 -->
                <div class="recipe-card bg-white rounded-xl overflow-hidden shadow-md transition duration-300">
                    <div class="relative overflow-hidden h-48">
                        <img src="https://images.unsplash.com/photo-1512621776951-a57141f2eefd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80" alt="Vegetable Curry" class="w-full h-full object-cover transition duration-500">
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-start">
                            <h3 class="font-semibold text-lg">Vegetable Coconut Curry</h3>
                            <div class="flex items-center bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">
                                <i class="fas fa-clock mr-1"></i>
                                <span>30 mins</span>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm mt-1">Creamy coastal-inspired vegetable curry</p>
                        <div class="flex items-center mt-3">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                            <span class="text-gray-500 text-xs ml-1">(24)</span>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-500">By Chef Ali</span>
                                <a href="#recipe-detail" class="text-orange-500 text-sm font-semibold hover:underline">View Recipe</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recipe 3 -->
                <div class="recipe-card bg-white rounded-xl overflow-hidden shadow-md transition duration-300">
                    <div class="relative overflow-hidden h-48">
                        <img src="https://images.unsplash.com/photo-1481931098730-318b6f776db0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80" alt="Mandazi" class="w-full h-full object-cover transition duration-500">
                    </div>
                    <div class="p-6">
                        <div class="flex justify-between items-start">
                            <h3 class="font-semibold text-lg">Swahili Coconut Mandazi</h3>
                            <div class="flex items-center bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">
                                <i class="fas fa-clock mr-1"></i>
                                <span>60 mins</span>
                            </div>
                        </div>
                        <p class="text-gray-600 text-sm mt-1">Sweet, fluffy donuts with coconut flavor</p>
                        <div class="flex items-center mt-3">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <span class="text-gray-500 text-xs ml-1">(42)</span>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100">
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-500">By Mama Aisha</span>
                                <a href="#" 
   class="text-orange-500 text-sm font-semibold hover:underline view-recipe-btn" 
   data-title="Swahili Coconut Mandazi"
   data-desc="This recipe makes sweet, fluffy mandazi infused with coconut milk..."
   data-chef="Mama Aisha"
   data-time="60 mins"
   data-image="https://images.unsplash.com/photo-1481931098730-318b6f776db0?..."
>
   View Recipe
</a>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Blog Section -->
<section id="blog" class="py-12 bg-gray-50">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12">From Our Blog</h2>

    <div id="blog-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      <!-- Blog posts will be injected here -->
    </div>

    <!-- Pagination Controls -->
    <div class="mt-10 flex justify-center gap-2" id="pagination-controls">
      <!-- Pagination buttons will go here -->
    </div>
  </div>
</section>



    <!-- About Us Section -->
  <section id="about" class="py-16 bg-white">
  <div class="container mx-auto px-4">
    <div class="flex flex-col lg:flex-row items-center">

      <!-- Story Text -->
      <div class="lg:w-1/2 mb-10 lg:mb-0 lg:pr-12">
        <h2 class="text-4xl font-bold mb-6 text-orange-600">Our Story</h2>
        <p class="text-gray-700 mb-4 leading-relaxed">
          Snack Inn began in 2025, right in the heart of Mombasa, with two friends and one wild, beautiful dream ‚Äî to turn everyday snacks into unforgettable moments.
        </p>
        <p class="text-gray-700 mb-4 leading-relaxed">
          It started in a tiny kitchen filled with sizzling oil, the smell of freshly made bhajia, and laughter that never left the room. One friend, <strong>Esther</strong>, believed snacks weren't just food ‚Äî they were memories, comfort, and celebration. The other? A tech-savvy foodie who wanted to bring Kenyan flavor to the world, one line of code and spice at a time.
        </p>
        <p class="text-gray-700 mb-6 leading-relaxed">
          Together, they built Snack Inn ‚Äî not just as a website, but as a digital home for food lovers across Kenya and beyond. From coastal treats like viazi karai and mahambri to spicy chapati wraps, every recipe is a love letter to the streets, the people, and the culture of Kenya.
        </p>
        <div class="flex space-x-4 mt-6">
          <a href="https://facebook.com/snackinn" target="_blank" class="bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://instagram.com/snackinn" target="_blank" class="bg-pink-600 text-white p-3 rounded-full hover:bg-pink-700 transition">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://twitter.com/snackinn" target="_blank" class="bg-blue-400 text-white p-3 rounded-full hover:bg-blue-500 transition">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="https://youtube.com/@snackinn" target="_blank" class="bg-red-600 text-white p-3 rounded-full hover:bg-red-700 transition">
            <i class="fab fa-youtube"></i>
          </a>
        </div>
      </div>

      <!-- Image Box -->
      <div class="lg:w-1/2 relative">
        <img src="https://images.unsplash.com/photo-1565958011703-44f9829ba187?ixlib=rb-4.0.3&auto=format&fit=crop&w=880&q=80" alt="Our Kitchen" class="rounded-lg shadow-xl w-full">
        <div class="absolute -bottom-6 -left-6 bg-white p-5 rounded-lg shadow-md w-[85%]">
          <h4 class="font-bold text-lg text-orange-600 mb-1">Where It All Began</h4>
          <p class="text-sm text-gray-600">From a small kitchen in Mombasa to your screen ‚Äî powered by snacks, friendship, and one founder's dream.</p>
        </div>
      </div>

    </div>
  </div>
</section>


<!-- Testimonials -->
<section class="py-16 bg-orange-50">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12 text-orange-600">What Our Customers Say</h2>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

      <!-- Testimonial 1 -->
      <div class="bg-white p-6 rounded-xl shadow-md">
        <div class="flex items-center mb-4">
          <div class="flex text-yellow-400 mr-2">
            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
          </div>
          <span class="text-xs text-gray-500">2 days ago</span>
        </div>
        <p class="text-gray-700 mb-4">"The chapati beef wrap? üî•üî•üî• I ordered twice in one day. Street food turned premium!"</p>
        <div class="flex items-center">
          <img src="/images/download.jpg" alt="Brian" class="w-10 h-10 rounded-full mr-3">
          <div>
            <h4 class="font-semibold">Brian O.</h4>
            <p class="text-xs text-gray-500">Mombasa</p>
          </div>
        </div>
      </div>

      <!-- Testimonial 2 -->
      <div class="bg-white p-6 rounded-xl shadow-md">
        <div class="flex items-center mb-4">
          <div class="flex text-yellow-400 mr-2">
            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
          </div>
          <span class="text-xs text-gray-500">1 week ago</span>
        </div>
        <p class="text-gray-700 mb-4">"Snack box is always a surprise. Last month's mahamri took me back to my grandma's kitchen."</p>
        <div class="flex items-center">
          <img src="/images/download (1).jpg" alt="Yvonne" class="w-10 h-10 rounded-full mr-3">
          <div>
            <h4 class="font-semibold">Yvonne W.</h4>
            <p class="text-xs text-gray-500">Mombasa</p>
          </div>
        </div>
      </div>

      <!-- Testimonial 3 -->
      <div class="bg-white p-6 rounded-xl shadow-md">
        <div class="flex items-center mb-4">
          <div class="flex text-yellow-400 mr-2">
            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
          </div>
          <span class="text-xs text-gray-500">3 weeks ago</span>
        </div>
        <p class="text-gray-700 mb-4">"The Swahili Coconut Mandazi recipe? Simple and golden. My fam thought I was a chef!"</p>
        <div class="flex items-center">
          <img src="/images/she is pretty good love her.jpg" alt="Jane" class="w-10 h-10 rounded-full mr-3">
          <div>
            <h4 class="font-semibold">Jane M.</h4>
            <p class="text-xs text-gray-500">Makongeni</p>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>



    <!-- Contact Section -->
    <section id="contact" class="py-12 bg-white">
        <div class="container mx-auto px-4">
            <div class="flex flex-col lg:flex-row">
                <div class="lg:w-1/2 mb-8 lg:mb-0 lg:pr-12">
                    <h2 class="text-3xl font-bold mb-6">Get In Touch</h2>
                    <p class="text-gray-700 mb-6">Have questions, suggestions, or just want to say hello? We'd love to hear from you! Fill out the form or reach out through our social media.</p>
                    
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="bg-orange-100 p-3 rounded-full mr-4">
                                <i class="fas fa-map-marker-alt text-orange-500"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold">Our Location</h4>
                                <p class="text-gray-600">Bombolulu, Mombasa, Kenya</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <div class="bg-orange-100 p-3 rounded-full mr-4">
                                <i class="fas fa-phone-alt text-orange-500"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold">Call Us</h4>
                                <p class="text-gray-600">+25441194979</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <div class="bg-orange-100 p-3 rounded-full mr-4">
                                <i class="fas fa-envelope text-orange-500"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold">Email Us</h4>
                                <p class="text-gray-600">snackinnstore@gmail.com</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <div class="bg-orange-100 p-3 rounded-full mr-4">
                                <i class="fas fa-clock text-orange-500"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold">Opening Hours</h4>
                                <p class="text-gray-600">Mon-Fri: 8AM - 8PM</p>
                                <p class="text-gray-600">Sat-Sun: 9AM - 6PM</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="form-container">
                    <form id="contact-form" method="POST" class="bg-gray-50 p-6 rounded-xl shadow-sm">
  <input type="hidden" name="_captcha" value="false">
  <input type="hidden" name="_next" value="index.html">
  <input type="hidden" name="_subject" value="New Contact Message from Snack Inn">

  <div class="mb-4">
    <label for="name" class="block text-gray-700 font-medium mb-2">Your Name</label>
    <input type="text" id="name" name="name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
  </div>

  <div class="mb-4">
    <label for="email" class="block text-gray-700 font-medium mb-2">Email Address</label>
    <input type="email" id="email" name="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
  </div>

  <div class="mb-4">
    <label for="subject" class="block text-gray-700 font-medium mb-2">Subject</label>
    <input type="text" id="subject" name="subject" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
  </div>

  <div class="mb-4">
    <label for="message" class="block text-gray-700 font-medium mb-2">Your Message</label>
    <textarea id="message" name="message" rows="4" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"></textarea>
  </div>

  <button type="submit" class="w-full bg-orange-500 text-white py-3 rounded-full font-semibold hover:bg-orange-600 transition">Send Message</button>
</form>
<!-- Thank You Popup -->
<div id="thank-you-popup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
  <div class="bg-white p-8 rounded-xl shadow-lg text-center max-w-sm mx-auto">
    <h2 class="text-2xl font-bold text-orange-500 mb-4">Thank You!</h2>
    <p class="text-gray-700 mb-4">Your message has been sent successfully. We'll get back to you soon!</p>
    <button onclick="closePopup()" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-full font-semibold">Close</button>
  </div>
</div>


                    
                    <div class="mt-6 p-6 bg-orange-50 rounded-xl">
                        <h4 class="font-bold text-lg mb-2">Delivery Information</h4>
                        <p class="text-gray-700 mb-4">We deliver within Mombasa for free! Outside Mombasa, delivery fees apply based on location.</p>
                        <div class="flex items-center">
                            <i class="fas fa-info-circle text-orange-500 mr-2"></i>
                            <span class="text-sm text-gray-600">Delivery hours: 10AM - 8PM daily</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

  <!-- Newsletter -->
<section class="py-12 bg-orange-500 text-white relative">
  <div class="container mx-auto px-4 text-center">
    <h2 class="text-3xl font-bold mb-2">Join Our Snack Community</h2>
    <p class="text-orange-100 mb-6 max-w-2xl mx-auto">
      Subscribe to our newsletter for exclusive offers, new snack alerts, and delicious recipes straight to your inbox.
    </p>

    <!-- Newsletter Form -->
    <form 
      id="newsletter-form"
      action="https://formsubmit.co/benjaminaugustine24@gmail.com" 
      method="POST" 
      class="max-w-md mx-auto flex"
    >
      <!-- Anti-bot stuff -->
      <input type="hidden" name="_captcha" value="false">
      <input type="hidden" name="_template" value="table">
      <input type="hidden" name="_autoresponse" value="Thanks for subscribing to Snack Inn!">

      <!-- Email Field -->
      <input 
        type="email" 
        name="newsletter-email" 
        placeholder="Your email address" 
        required
        class="flex-grow px-4 py-3 rounded-l-full focus:outline-none text-gray-800"
      >

      <!-- Submit Button -->
      <button 
        type="submit" 
        class="bg-orange-700 px-6 py-3 rounded-r-full font-semibold hover:bg-orange-800 transition"
      >
        Subscribe
      </button>
    </form>

    <!-- Success Message Popup -->
    <div 
      id="newsletter-success"
      class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white text-orange-600 font-semibold px-6 py-3 rounded-lg shadow-lg hidden z-50"
    >
      üéâ Thank you for subscribing to Snack Inn!
    </div>

    <p class="text-orange-100 text-sm mt-4">
      We respect your privacy. Unsubscribe at any time.
    </p>
  </div>
</section>



    <!-- Footer -->
<footer class="bg-gray-900 text-white py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">

      <!-- Brand -->
      <div>
        <div class="flex items-center space-x-2 mb-4">
          <div class="text-2xl text-orange-500">
            <i class="fas fa-pizza-slice"></i>
          </div>
          <a href="index.html" class="logo-font text-2xl text-orange-500">Snack Inn</a>
        </div>
        <p class="text-gray-400 mb-4">
          Delivering happiness through delicious snacks from Kenya and around the world.
        </p>
        <div class="flex space-x-4">
          <a href="https://facebook.com" target="_blank" class="text-gray-400 hover:text-orange-500 transition">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://twitter.com" target="_blank" class="text-gray-400 hover:text-orange-500 transition">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="https://instagram.com" target="_blank" class="text-gray-400 hover:text-orange-500 transition">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://tiktok.com" target="_blank" class="text-gray-400 hover:text-orange-500 transition">
            <i class="fab fa-tiktok"></i>
          </a>
        </div>
      </div>

      <!-- Quick Links -->
      <div>
        <h4 class="font-bold text-lg mb-4">Quick Links</h4>
        <ul class="space-y-2">
          <li><a href="index.html#home" class="text-gray-400 hover:text-orange-500 transition">Home</a></li>
          <li><a href="shop.html" class="text-gray-400 hover:text-orange-500 transition">Shop</a></li>
          <li><a href="recipes.html" class="text-gray-400 hover:text-orange-500 transition">Recipes</a></li>
          <li><a href="index.html#blog" class="text-gray-400 hover:text-orange-500 transition">Blog</a></li>
          <li><a href="index.html#about" class="text-gray-400 hover:text-orange-500 transition">About Us</a></li>
          <li><a href="index.html#contact" class="text-gray-400 hover:text-orange-500 transition">Contact</a></li>
        </ul>
      </div>

      <!-- Customer Service -->
      <div>
  <h4 class="font-bold text-lg mb-4">Customer Service</h4>
  <ul class="space-y-2 text-gray-400 text-sm">
    
    <li>
      <button class="w-full text-left hover:text-orange-500 font-medium" onclick="toggleFAQ()">FAQs</button>
      <div id="faq-content" class="mt-2 pl-4 text-gray-300 hidden">
        <ul class="list-disc">
          <li>What payment methods do you accept?</li>
          <li>Do you offer delivery outside Mombasa?</li>
          <li>How can I track my order?</li>
        </ul>
      </div>
    </li>

    <li>
      <button class="w-full text-left hover:text-orange-500 font-medium" onclick="toggleShipping()">Shipping Policy</button>
      <div id="shipping-content" class="mt-2 pl-4 text-gray-300 hidden">
        <p>We offer free delivery within Mombasa. For other counties, rates depend on location and package weight.</p>
      </div>
    </li>

    <li>
      <button class="w-full text-left hover:text-orange-500 font-medium" onclick="toggleReturns()">Returns & Refunds</button>
      <div id="returns-content" class="mt-2 pl-4 text-gray-300 hidden">
        <p>Contact us within 48 hours of delivery. Snacks must be unopened. Refunds take 3‚Äì5 business days.</p>
      </div>
    </li>

    <li>
      <button class="w-full text-left hover:text-orange-500 font-medium" onclick="togglePrivacy()">Privacy Policy</button>
      <div id="privacy-content" class="mt-2 pl-4 text-gray-300 hidden">
        <p>We do not sell or share your data. Your personal info is encrypted and only used to fulfill orders.</p>
      </div>
    </li>

    <li>
      <button class="w-full text-left hover:text-orange-500 font-medium" onclick="toggleTerms()">Terms of Service</button>
      <div id="terms-content" class="mt-2 pl-4 text-gray-300 hidden">
        <p>By using Snack Inn, you agree to fair usage, respectful behavior, and honest transactions.</p>
      </div>
    </li>

  </ul>
</div>


      <!-- Payments & App -->
      <div>
        <h4 class="font-bold text-lg mb-4">Payment Methods</h4>
        <div class="grid grid-cols-3 gap-3 mb-4">
          <div class="bg-gray-800 p-3 rounded-lg flex items-center justify-center">
            <i class="fas fa-mobile-alt text-2xl text-green-500"></i>
          </div>
          <div class="bg-gray-800 p-3 rounded-lg flex items-center justify-center">
            <i class="fab fa-cc-paypal text-2xl text-blue-500"></i>
          </div>
          <div class="bg-gray-800 p-3 rounded-lg flex items-center justify-center">
            <i class="fab fa-cc-visa text-2xl text-blue-900"></i>
          </div>
          <div class="bg-gray-800 p-3 rounded-lg flex items-center justify-center">
            <i class="fab fa-cc-mastercard text-2xl text-red-500"></i>
          </div>
          <div class="bg-gray-800 p-3 rounded-lg flex items-center justify-center">
            <i class="fas fa-university text-2xl text-purple-500"></i>
          </div>
          <div class="bg-gray-800 p-3 rounded-lg flex items-center justify-center">
            <i class="fas fa-money-bill-wave text-2xl text-green-600"></i>
          </div>
        </div>

        <h4 class="font-bold text-lg mb-2 mt-6">Download Our App</h4>
        <div class="flex space-x-2">
          <a href="#" class="flex-1 bg-black text-white py-2 px-3 rounded-lg flex items-center justify-center text-xs">
            <i class="fab fa-apple mr-1 text-lg"></i>
            <div>
              <div class="text-xxs">Download on the</div>
              <div class="font-bold">App Store</div>
            </div>
          </a>
          <a href="#" class="flex-1 bg-black text-white py-2 px-3 rounded-lg flex items-center justify-center text-xs">
            <i class="fab fa-google-play mr-1 text-lg"></i>
            <div>
              <div class="text-xxs">Get it on</div>
              <div class="font-bold">Google Play</div>
            </div>
          </a>
        </div>
      </div>
    </div>

    <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500 text-sm">
      <p>&copy; Snack Inn, All Rights Reserved. Made with ‚ù§Ô∏è in Mombasa, 2025.</p>
    </div>
  </div>
</footer>




    <!-- Shopping Cart Sidebar -->
    <div id="cart-sidebar" class="fixed top-0 right-0 w-full md:w-96 h-full bg-white shadow-lg transform translate-x-full transition-transform duration-300 z-50 overflow-y-auto hidden">
        <div class="p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">Your Cart</h3>
                <button id="close-cart-sidebar" class="text-gray-500 hover:text-orange-500">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="cart-items" class="space-y-4 mb-6">
                <!-- Cart items will be added here dynamically -->
                <div class="text-center py-8 text-gray-500" id="empty-cart-message">
                    <i class="fas fa-shopping-cart text-4xl mb-2"></i>
                    <p>Your cart is empty</p>
                </div>
            </div>
            
            <div class="border-t border-gray-200 pt-4">
                <div class="flex justify-between mb-2">
                    <span class="text-gray-600">Subtotal</span>
                    <span id="cart-subtotal" class="font-semibold">KSh 0</span>
                </div>
                <div class="flex justify-between mb-2">
                    <span class="text-gray-600">Delivery</span>
                    <span id="cart-delivery" class="font-semibold">KSh 0</span>
                </div>
                <div class="flex justify-between mb-4">
                    <span class="text-gray-600">Tax</span>
                    <span id="cart-tax" class="font-semibold">KSh 0</span>
                </div>
                <div class="flex justify-between text-lg font-bold border-t border-gray-200 pt-2 mb-6">
                    <span>Total</span>
                    <span id="cart-total">KSh 0</span>
                </div>
                
                <button id="checkout-btn-sidebar" class="w-full bg-orange-500 text-white py-3 rounded-full font-semibold hover:bg-orange-600 transition mb-4">Proceed to Checkout</button>
                <a href="#shop" class="block text-center text-orange-500 font-medium hover:underline">Continue Shopping</a>
            </div>
        </div>
    </div>
    <div id="cart-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

    <!-- LOGIN MODAL -->
<div id="login-modal" class="fixed inset-0 hidden z-50 flex items-center justify-center">
  <div class="absolute inset-0 bg-black bg-opacity-50"></div>
  <div class="bg-white rounded-xl shadow-lg relative z-10 w-full max-w-md mx-4">
    <div class="p-6">
      <div id="login-error-message" class="hidden bg-red-100 text-red-700 px-4 py-2 rounded mb-4 text-sm text-center"></div>
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-bold">Welcome Back</h3>
        <button id="close-login" class="text-gray-500 hover:text-orange-500">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="login-form">
        <div class="mb-4">
          <label for="login-email" class="block text-gray-700 font-medium mb-2">Email</label>
          <input type="email" id="login-email" class="w-full px-4 py-2 border border-gray-300 rounded-lg" required />
        </div>
        <div class="mb-4 relative">
          <label for="login-password" class="block text-gray-700 font-medium mb-2">Password</label>
          <input type="password" id="login-password" class="w-full px-4 py-2 border border-gray-300 rounded-lg pr-10" required />
          <button type="button" aria-label="Show password" onclick="togglePassword('login-password', this)" class="absolute right-3 top-[70%] -translate-y-1/2 text-gray-500">
            <i class="fas fa-eye"></i>
          </button>
        </div>

        <div class="flex justify-between items-center mb-6">
                        <div class="flex items-center">
                            <input type="checkbox" id="remember-me" class="mr-2">
                            <label for="remember-me" class="text-sm text-gray-600">Remember me</label>
                        </div>
                        <a href="forgot-password.html" id="forgot-password-link" class="text-sm text-orange-500 hover:underline">Forgot password?</a>
                    </div>

        <button type="submit" class="w-full bg-orange-500 text-white py-3 rounded-lg font-semibold hover:bg-orange-600 transition mb-4">Login</button>

        <div class="text-center text-sm text-gray-600">
          Don't have an account?
          <button type="button" id="show-register" class="text-orange-500 hover:underline">Register</button>
        </div>
        <div class="text-center text-sm text-gray-600 mt-2">
          <button type="button" id="guest-login" class="text-orange-500 hover:underline">Continue as Guest</button>
        </div>
         <div class="flex items-center my-6">
                    <div class="flex-grow border-t border-gray-300"></div>
                    <span class="mx-4 text-gray-500">OR</span>
                    <div class="flex-grow border-t border-gray-300"></div>
                </div>
                
            <div class="grid grid-cols-2 gap-3">
                <button id="google-signin-btn"
                    class="flex items-center justify-center py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition"
                    aria-label="Sign in with Google">
                    <i class="fab fa-google text-red-500 mr-2" aria-hidden="true"></i>
                    <span>Google</span>
                </button>
                <button id="facebook-signin-btn"
                    class="flex items-center justify-center py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition"
                    aria-label="Sign in with Facebook">
                    <i class="fab fa-facebook-f text-blue-600 mr-2" aria-hidden="true"></i>
                    <span>Facebook</span>
                </button>
            </div>
        
      </form>
    </div>
  </div>
</div>

<!-- REGISTER MODAL -->
<div id="register-modal" class="fixed inset-0 hidden items-center justify-center z-50">
  <div class="absolute inset-0 bg-black bg-opacity-50"></div>
  <div class="bg-white rounded-xl shadow-lg relative z-10 w-full max-w-md mx-4">
    <div class="p-6">
      <div id="register-error-message" class="hidden bg-red-100 text-red-700 px-4 py-2 rounded mb-4 text-sm text-center"></div>
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-bold">Create Account</h3>
        <button id="close-register" class="text-gray-500 hover:text-orange-500">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <form id="register-form">
        <div class="mb-4">
          <label for="register-name" class="block text-gray-700 font-medium mb-2">Full Name</label>
          <input type="text" id="register-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg" required />
        </div>
        <div class="mb-4">
          <label for="register-email" class="block text-gray-700 font-medium mb-2">Email</label>
          <input type="email" id="register-email" class="w-full px-4 py-2 border border-gray-300 rounded-lg" required />
        </div>
        <div class="mb-4">
          <label for="register-phone" class="block text-gray-700 font-medium mb-2">Phone Number</label>
          <input type="tel" id="register-phone" name="phone" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
        </div>
        <div class="mb-4 relative">
          <label for="register-password" class="block text-gray-700 font-medium mb-2">Password</label>
          <input type="password" id="register-password" class="w-full px-4 py-2 border border-gray-300 rounded-lg pr-10" required />
          <button type="button" aria-label="Show password" onclick="togglePassword('register-password', this)" class="absolute right-3 top-[70%] -translate-y-1/2 text-gray-500">
            <i class="fas fa-eye"></i>
          </button>
        </div>
        <div class="mb-6 relative">
          <label for="register-confirm" class="block text-gray-700 font-medium mb-2">Confirm Password</label>
          <input type="password" id="register-confirm" class="w-full px-4 py-2 border border-gray-300 rounded-lg pr-10" required />
          <button type="button" aria-label="Show password" onclick="togglePassword('register-confirm', this)" class="absolute right-3 top-[70%] -translate-y-1/2 text-gray-500">
            <i class="fas fa-eye"></i>
          </button>
        </div>

        <button type="submit" class="w-full bg-orange-500 text-white py-3 rounded-lg font-semibold hover:bg-orange-600 transition mb-4">Register</button>

        <div class="text-center text-sm text-gray-600">
          Already have an account?
          <button type="button" id="show-login" class="text-orange-500 hover:underline">Login</button>
        </div>
      </form>
       <div class="flex items-center my-6">
        <div class="flex-grow border-t border-gray-300"></div>
        <span class="mx-4 text-gray-500">OR</span>
        <div class="flex-grow border-t border-gray-300"></div>
      </div>

      <div class="grid grid-cols-2 gap-3">
        <button id="google-signup-btn" class="flex items-center justify-center py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
          <i class="fab fa-google text-red-500 mr-2"></i>
          <span>Google</span>
        </button>
        <button id="facebook-signup-btn" class="flex items-center justify-center py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
          <i class="fab fa-facebook-f text-blue-600 mr-2"></i>
          <span>Facebook</span>
        </button>
      </div>
    </div>
  </div>
</div>


<!-- üî• FIREBASE LOGIC -->
<script type="module" src="snackinn-firebase.js"></script>

<!-- ‚ö° AUTH + CART LOGIC -->
<script type="module">
  // AUTH
  let isLogin = true;

  function openAuthModal() {
    document.getElementById("login-modal")?.classList.remove("hidden");
    document.getElementById("register-modal")?.classList.add("hidden");
    isLogin = true;
  }

  function closeAuthModal() {
    document.getElementById("login-modal")?.classList.add("hidden");
    document.getElementById("register-modal")?.classList.add("hidden");
  }

  function openRegisterModal() {
    document.getElementById("login-modal")?.classList.add("hidden");
    document.getElementById("register-modal")?.classList.remove("hidden");
    isLogin = false;
  }
  function closeRegisterModal() {
    document.getElementById("login-modal")?.classList.add("hidden");
    document.getElementById("register-modal")?.classList.add("hidden");
  }

    

  // Remove duplicate snackLogout and logoutUser definitions to prevent conflicts.

  function showUserStatus() {
    import("https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js").then(({ getAuth, onAuthStateChanged }) => {
      const auth = getAuth();
      const userWelcome = document.getElementById("user-welcome");
      const mobileUserWelcome = document.getElementById("mobile-user-welcome");
      const mobileLogoutBtn = document.getElementById("mobile-logout-btn");
      const mobileLoginAuth = document.getElementById("mobile-login-btn-auth");
      const mobileRegisterAuth = document.getElementById("mobile-register-btn-auth");

      onAuthStateChanged(auth, (user) => {
        if (user) {
          if (userWelcome) {
            userWelcome.classList.remove("hidden");
            userWelcome.textContent = "Welcome, " + (user.displayName || user.email || "User");
          }
          if (mobileUserWelcome) {
            mobileUserWelcome.classList.remove("hidden");
            mobileUserWelcome.textContent = "Welcome, " + (user.displayName || user.email || "User");
          }
          if (mobileLogoutBtn) mobileLogoutBtn.classList.remove("hidden");
          if (mobileLoginAuth) mobileLoginAuth.classList.add("hidden");
          if (mobileRegisterAuth) mobileRegisterAuth.classList.add("hidden");
        } else {
          if (userWelcome) userWelcome.classList.add("hidden");
          if (mobileUserWelcome) mobileUserWelcome.classList.add("hidden");
          if (mobileLogoutBtn) mobileLogoutBtn.classList.add("hidden");
          if (mobileLoginAuth) mobileLoginAuth.classList.remove("hidden");
          if (mobileRegisterAuth) mobileRegisterAuth.classList.remove("hidden");
        }
      }); // <-- CLOSE onAuthStateChanged CALLBACK
    }); // <-- ADD THIS LINE to close the import().then( ... ) block
  } // <-- ADD THIS LINE to properly close showUserStatus function

  // ‚úÖ Desktop and Mobile Auth Buttons
 

  // Switching between login and register inside modals
// Open Login Modal
// Open Login Modal
document.getElementById("login-btn")?.addEventListener("click", () => {
  closeAllModals();
  const modal = document.getElementById("login-modal");
  modal?.classList.remove("hidden");
  modal?.classList.add("flex");
});

// Open Register Modal
document.getElementById("register-btn")?.addEventListener("click", () => {
  closeAllModals();
  const modal = document.getElementById("register-modal");
  modal?.classList.remove("hidden");
  modal?.classList.add("flex");
});

// Switch to Register
document.getElementById("show-register")?.addEventListener("click", () => {
  closeAllModals();
  const modal = document.getElementById("register-modal");
  modal?.classList.remove("hidden");
  modal?.classList.add("flex");
});

// Switch to Login
document.getElementById("show-login")?.addEventListener("click", () => {
  closeAllModals();
  const modal = document.getElementById("login-modal");
  modal?.classList.remove("hidden");
  modal?.classList.add("flex");
});

// Close Modals
document.getElementById("close-login")?.addEventListener("click", closeAllModals);
document.getElementById("close-register")?.addEventListener("click", closeAllModals);

function closeAllModals() {
  ["login-modal", "register-modal"].forEach(id => {
    const el = document.getElementById(id);
    if (el) {
      el.classList.add("hidden");
      el.classList.remove("flex");
    }
  });
}
// Show user status on page load
document.addEventListener("DOMContentLoaded", () => {
  showUserStatus();
});




// Mobile Login Button
document.getElementById("mobile-login-btn-auth")?.addEventListener("click", () => {
  closeAllModals();
  const modal = document.getElementById("login-modal");
  modal?.classList.remove("hidden");
  modal?.classList.add("flex");
});

// Mobile Register Button
document.getElementById("mobile-register-btn-auth")?.addEventListener("click", () => {
  closeAllModals();
  const modal = document.getElementById("register-modal");
  modal?.classList.remove("hidden");
  modal?.classList.add("flex");
});
  const loginBtn = document.getElementById("login-btn");
  if (loginBtn) loginBtn.addEventListener("click", openAuthModal); 
  const registerBtn = document.getElementById("register-btn");
  if (registerBtn) registerBtn.addEventListener("click", openRegisterModal);
  
  const mobileLoginBtn = document.getElementById("mobile-login-btn");
  if (mobileLoginBtn) mobileLoginBtn.addEventListener("click", openAuthModal);
  const mobileRegisterBtn = document.getElementById("mobile-register-btn");
  if (mobileRegisterBtn) mobileRegisterBtn.addEventListener("click", openRegisterModal);
 
  const guestLoginBtn = document.getElementById("guest-login");
  if (guestLoginBtn) guestLoginBtn.addEventListener("click", () => {
    closeAuthModal();
    showUserStatus(); // Show guest status immediately
  });
  const showRegisterBtn = document.getElementById("show-register");
  if (showRegisterBtn) showRegisterBtn.addEventListener("click", openRegisterModal);
  const showLoginBtn = document.getElementById("show-login");
  if (showLoginBtn) showLoginBtn.addEventListener("click", openAuthModal);


function closeMobileMenu() {
  const menu = document.getElementById('enhanced-mobile-menu');
  const panel = document.getElementById('enhanced-mobile-menu-panel');
  if (menu && panel) {
    panel.classList.add('translate-x-full');
    setTimeout(() => menu.classList.add('hidden'), 300);
  }
}

// Then update buttons to also call:
document.getElementById("mobile-login-btn-auth")?.addEventListener("click", () => {
  closeAllModals();
  document.getElementById("login-modal")?.classList.remove("hidden");
  document.getElementById("login-modal")?.classList.add("flex");
  closeMobileMenu();
});

document.getElementById("mobile-register-btn-auth")?.addEventListener("click", () => {
  closeAllModals();
  document.getElementById("register-modal")?.classList.remove("hidden");
  document.getElementById("register-modal")?.classList.add("flex");
  closeMobileMenu();
});
  // ‚úÖ Mobile Auth Buttons
  const mobileLoginBtnAuth = document.getElementById("mobile-login-btn-auth"); 
  if (mobileLoginBtnAuth) mobileLoginBtnAuth.addEventListener("click", openAuthModal);
  const mobileRegisterBtnAuth = document.getElementById("mobile-register-btn-auth");
  if (mobileRegisterBtnAuth) mobileRegisterBtnAuth.addEventListener("click", openRegisterModal);
  
  // ‚úÖ Guest Login Button
  const guestLoginBtnAuth = document.getElementById("guest-login");
  if (guestLoginBtnAuth) guestLoginBtnAuth.addEventListener("click", () => {
    closeAuthModal();
    showUserStatus(); // Show guest status immediately
  });
  // ‚úÖ Show Register/Login Buttons
  const showRegisterBtnAuth = document.getElementById("show-register");
  if (showRegisterBtnAuth) showRegisterBtnAuth.addEventListener("click", openRegisterModal);
  const showLoginBtnAuth = document.getElementById("show-login");
  if (showLoginBtnAuth) showLoginBtnAuth.addEventListener("click", openAuthModal); 
  // ‚úÖ Mobile User Welcome
  const mobileUserWelcome = document.getElementById("mobile-user-welcome");
  if (mobileUserWelcome) {
    mobileUserWelcome.addEventListener("click", () => {
      closeAuthModal();
      closeMobileMenu();
    });
  }
  // ‚úÖ User Welcome
  const userWelcome = document.getElementById("user-welcome");
  if (userWelcome) {
    userWelcome.addEventListener("click", () => {
      closeAuthModal();
      closeMobileMenu();
    });
  }
  // ‚úÖ Mobile Logout Button
  
 
  
  
  // ‚úÖ Modal Open Buttons
  const loginBtnAuth = document.getElementById("login-btn-auth");
  if (loginBtnAuth) loginBtnAuth.addEventListener("click", openAuthModal);
  const registerBtnAuth = document.getElementById("register-btn-auth");
  if (registerBtnAuth) registerBtnAuth.addEventListener("click", openRegisterModal);
  // ‚úÖ Mobile Auth Buttons
  // ‚úÖ Modal Close Buttons
  const closeLogin = document.getElementById("close-login");
  if (closeLogin) closeLogin.addEventListener("click", closeAuthModal);

  const closeRegister = document.getElementById("close-register");
  if (closeRegister) closeRegister.addEventListener("click", closeAuthModal);

  // üî• Init on load
  // (Removed duplicate DOMContentLoaded event listener to avoid double event registration)
  
  

    // Event listeners for cart and auth actions
    // Only add event listeners if elements exist
    
   

    // Modal switch buttons
    
    
    // MOBILE LOGIN/REGISTER BUTTONS
    // showUserStatus(); // Removed duplicate call
    document.getElementById("mobile-login-btn")?.addEventListener("click", () => {
      closeAllModals();
      const modal = document.getElementById("login-modal");
      if (modal) {
        modal.classList.remove("hidden");
        modal.classList.add("flex");
      }
    });
    document.getElementById("mobile-register-btn")?.addEventListener("click", () => {
      closeAllModals();
      const modal = document.getElementById("register-modal");
      if (modal) {
        modal.classList.remove("hidden");
        modal.classList.add("flex");
      }
    });
    
    // Guest login button
    document.getElementById("guest-login")?.addEventListener("click", () => {
      // Close any open modals
      closeAllModals();
      // Optionally redirect to a guest checkout page
      window.location.href = "checkout.html"; // Adjust this URL as needed
    });

    // Only add event listener if not already added above
    // (This block is redundant and can cause duplicate listeners, so it is removed)

    // Simple forgot password handler (shows prompt and sends reset email if Firebase Auth is set up)
    const forgotPasswordLink = document.getElementById('forgot-password-link');
    if (forgotPasswordLink) {
      forgotPasswordLink.addEventListener('click', async (e) => {
        e.preventDefault();
        const emailInput = document.getElementById('login-email');
        if (!emailInput) {
          alert('Email input not found.');
          return;
        }
        const email = emailInput.value;
        if (!email) {
          alert("Please enter your email address above first.");
          return;
        }
        const [{ getAuth, sendPasswordResetEmail }] = await Promise.all([
          import('https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js')
        ]);
        const auth = getAuth();
        sendPasswordResetEmail(auth, email)
          .then(() => {
            alert('Password reset email sent! Please check your inbox.');
          })
          .catch((error) => {
            alert(error.message);
          });
      });
    }

    // Mobile menu logic
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const enhancedMenu = document.getElementById('enhanced-mobile-menu');
    const closeEnhancedMenu = document.getElementById('close-enhanced-menu');
    const enhancedMenuPanel = document.getElementById('enhanced-mobile-menu-panel');

    // Open menu
    if (mobileMenuButton && enhancedMenu && enhancedMenuPanel) {
      mobileMenuButton.addEventListener('click', () => {
        enhancedMenu.classList.remove('hidden');
        enhancedMenuPanel.classList.remove('translate-x-full');
      });
    }

    // Close menu when clicking close button
    if (closeEnhancedMenu && enhancedMenu && enhancedMenuPanel) {
      closeEnhancedMenu.addEventListener('click', () => {
        enhancedMenuPanel.classList.add('translate-x-full');
        setTimeout(() => {
          enhancedMenu.classList.add('hidden');
        }, 300);
      });
    }

    // Close menu when clicking any link in the mobile menu
    const enhancedMenuLinks = document.querySelectorAll('#enhanced-mobile-menu a');
    if (enhancedMenuLinks && enhancedMenu && enhancedMenuPanel) {
      enhancedMenuLinks.forEach(link => {
        link.addEventListener('click', () => {
          enhancedMenuPanel.classList.add('translate-x-full');
          setTimeout(() => {
            enhancedMenu.classList.add('hidden');
          }, 300);
        });
      });
    }

        // Google Sign-In with popup for account selection (login)
    document.getElementById('google-signin-btn')?.addEventListener('click', async () => {
      const [{ getAuth, GoogleAuthProvider, signInWithPopup }] = await Promise.all([
        import('https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js')
      ]);
      const auth = getAuth();
      const provider = new GoogleAuthProvider();
      provider.setCustomParameters({ prompt: 'select_account' }); // Always ask to choose account
      signInWithPopup(auth, provider)
        .then(() => {
          document.getElementById('login-modal')?.classList.add('hidden');
          document.getElementById('register-modal')?.classList.add('hidden');
        })
        .catch((error) => {
          // Show error in a styled div inside the modal
          let errorDiv = document.getElementById('login-error-message');
          if (!errorDiv) {
            errorDiv = document.createElement('div');
            errorDiv.id = 'login-error-message';
            errorDiv.className = 'bg-red-100 text-red-700 px-4 py-2 rounded mb-4 text-sm text-center';
            // Insert at the top of the modal (login)
            const modal = document.getElementById('login-modal');
            if (modal) modal.querySelector('.p-6')?.prepend(errorDiv);
          }
          errorDiv.textContent = error.message;
        });
    });

    // Facebook Sign-In with popup for account selection (login)
    document.getElementById('facebook-signin-btn')?.addEventListener('click', async () => {
      const [{ getAuth, FacebookAuthProvider, signInWithPopup }] = await Promise.all([
        import('https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js')
      ]);
      const auth = getAuth();
      const provider = new FacebookAuthProvider();
      provider.setCustomParameters({ auth_type: 'reauthenticate' }); // Prompt for account selection
      signInWithPopup(auth, provider)
        .then(() => {
          document.getElementById('login-modal')?.classList.add('hidden');
          document.getElementById('register-modal')?.classList.add('hidden');
        })
        .catch((error) => {
          alert(error.message);
        });
    });

    // Google Sign-Up with popup for account selection (register)
    document.getElementById('google-signup-btn')?.addEventListener('click', async () => {
      const [{ getAuth, GoogleAuthProvider, signInWithPopup }] = await Promise.all([
        import('https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js')
      ]);
      const auth = getAuth();
      const provider = new GoogleAuthProvider();
      provider.setCustomParameters({ prompt: 'select_account' });
      signInWithPopup(auth, provider)
        .then(() => {
          document.getElementById('login-modal')?.classList.add('hidden');
          document.getElementById('register-modal')?.classList.add('hidden');
        })
        .catch((error) => {
          alert(error.message);
        });
    });

    // Facebook Sign-Up with popup for account selection (register)
    document.getElementById('facebook-signup-btn')?.addEventListener('click', async () => {
      const [{ getAuth, FacebookAuthProvider, signInWithPopup }] = await Promise.all([
        import('https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js')
      ]);
      const auth = getAuth();
      const provider = new FacebookAuthProvider();
      provider.setCustomParameters({ auth_type: 'reauthenticate' });
      signInWithPopup(auth, provider)
        .then(() => {
          document.getElementById('login-modal')?.classList.add('hidden');
          document.getElementById('register-modal')?.classList.add('hidden');
        })
        .catch((error) => {
          alert(error.message);
        });
    });

  // Register form logic
  Promise.all([
    import("https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js")
  ]).then(([{ getAuth, createUserWithEmailAndPassword, updateProfile, signInWithEmailAndPassword }]) => {
    const auth = getAuth();

    // REGISTER FORM SUBMIT
    const registerForm = document.getElementById("register-form");
    if (registerForm) {
      registerForm.addEventListener("submit", async (e) => {
        e.preventDefault();
          console.log("‚úÖ Register form submitted");

        const name = document.getElementById("register-name").value.trim();
        const email = document.getElementById("register-email").value.trim();
        const password = document.getElementById("register-password").value;
        const confirm = document.getElementById("register-confirm").value;

        const errorBox = document.getElementById("register-error-message");
        if (errorBox) {
          errorBox.textContent = "";
          errorBox.classList.add("hidden");
        }

        if (!email || !password || !confirm) {
          if (errorBox) {
            errorBox.textContent = "Please fill all required fields.";
            errorBox.classList.remove("hidden");
          }
          return;
        }

        if (password !== confirm) {
          if (errorBox) {
            errorBox.textContent = "Passwords do not match.";
            errorBox.classList.remove("hidden");
          }
          return;
        }

        try {
          const userCredential = await createUserWithEmailAndPassword(auth, email, password);
          const user = userCredential.user;
          if (name && user) {
            await updateProfile(user, { displayName: name });
          }

          // Save UID
          localStorage.setItem("snack_user", JSON.stringify({ uid: user.uid }));
          document.getElementById("register-modal")?.classList.add("hidden");
          location.reload(); // or call showUserStatus()
        } catch (err) {
          if (errorBox) {
            errorBox.textContent = "‚ùå " + err.message;
            errorBox.classList.remove("hidden");
          }
        }
      });
    }

    // LOGIN FORM SUBMIT
    const loginForm = document.getElementById("login-form");
    if (loginForm) {
      loginForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const email = document.getElementById("login-email").value.trim();
        const password = document.getElementById("login-password").value;
        const errorBox = document.getElementById("login-error-message");
        if (errorBox) {
          errorBox.textContent = "";
          errorBox.classList.add("hidden");
        }
        if (!email || !password) {
          if (errorBox) {
            errorBox.textContent = "Please enter both email and password.";
            errorBox.classList.remove("hidden");
          }
          return;
        }
        try {
          await signInWithEmailAndPassword(auth, email, password);
          document.getElementById("login-modal")?.classList.add("hidden");
          document.getElementById("register-modal")?.classList.add("hidden");
          showUserStatus();
        } catch (err) {
          if (errorBox) {
            errorBox.textContent = "‚ùå " + err.message;
            errorBox.classList.remove("hidden");
          }
        }
      });
    }
  });
</script>

<script type="module">
 
  document.addEventListener("DOMContentLoaded", () => {
    const loginModal = document.getElementById("login-modal");
    const registerModal = document.getElementById("register-modal");

    // ‚úÖ Switch to REGISTER Modal
    const showRegisterBtn = document.getElementById("show-register");
    if (showRegisterBtn) {
      showRegisterBtn.addEventListener("click", () => {
        if (loginModal) loginModal.classList.add("hidden");
        setTimeout(() => {
          if (registerModal) registerModal.classList.remove("hidden");
        }, 50); // Allow DOM to finish hiding before showing next
      });
    }

    // ‚úÖ Switch to LOGIN Modal
    const showLoginBtn = document.getElementById("show-login");
    if (showLoginBtn) {
      showLoginBtn.addEventListener("click", () => {
        if (registerModal) registerModal.classList.add("hidden");
        setTimeout(() => {
          if (loginModal) loginModal.classList.remove("hidden");
        }, 50);
      });
    }
  });

  document.getElementById("register-btn")?.addEventListener("click", () => {
  const modal = document.getElementById("register-modal");
  if (!modal) {
    console.warn("‚ùå No #register-modal element found in DOM!");
  } else {
    modal.classList.remove("hidden");
    modal.style.display = "flex";
    console.log("‚úÖ Register modal manually triggered.");
  }
});

</script>

<script>
  const blogPosts = [
    {
      title: "Exploring Mombasa's Best Street Food",
      category: "Street Food",
      image: "https://dynamic-media.tacdn.com/media/photo-o/2f/16/dd/6b/caption.jpg?w=1400&h=1000&s=1",
      author: "Wanjiru M.",
      date: "May 15, 2025",
      summary: "Discover the hidden gems of Mombasa's vibrant street food scene, from smokie pasua to mutura.",
      url: "https://davidsbeenhere.com/2023/12/20/mombasa-kenya-ultimate-travel-food-guide/"
    },
    {
      title: "12 Healthy Kenyan Snacks You Should Try",
      category: "Healthy",
      image: "https://thekenyatimescdn-ese7d3e7ghdnbfa9.z01.azurefd.net/prodimages/uploads/2023/04/Healthy-Snacks.jpeg",
      author: "Jamal K.",
      date: "Apr 28, 2025",
      summary: "Who says snacks can't be healthy? Discover nutritious Kenyan snacks that taste amazing.",
      url: "https://www.capitalfm.co.ke/lifestyle/2022/03/29/12-healthy-snack-ideas-that-will-help-you-maintain-a-lean-body-recipes/"
    },
    {
      title: "2025's Biggest Snack Trends in Kenya",
      category: "Trends",
      image: "https://www.wm-strategy.com/media/.renditions/Kenya-Snack-Food-Market-2015-to-2019.png",
      author: "Aisha M.",
      date: "Apr 10, 2025",
      summary: "From fusion flavors to nostalgic treats, here's what Kenyans are snacking on this year.",
      url: "https://store.strategyh.com/report/snacks-market-in-kenya/"
    },
    {
      title: "How to Make the Perfect Kenyan Mandazi",
      category: "Recipes",
      image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcScBUFJDsTSlmYAfT7THG9F0mFtgCc13D_n5g&s",
      author: "Mama Aisha",
      date: "Mar 10, 2025",
      summary: "Soft, fluffy, and perfectly golden‚Äîget our expert mandazi recipe here.",
      url: "https://tasty.co/recipe/mandazi"
    },
    {
      title: "Coastal Snacks: Viazi Karai & Bhajia",
      category: "Coastal",
      image: "https://img-global.cpcdn.com/recipes/f7ab109695803582/640x640sq80/photo.webp",
      author: "Chef Omari",
      date: "Feb 22, 2025",
      summary: "Deep-fried delights that define Mombasa's food culture.",
      url: "https://cookpad.com/eng/recipes/14431883"
    },
  ];

  const postsPerPage = 3;
  let currentPage = 1;

  function renderBlogPosts(page = 1) {
    const blogGrid = document.getElementById("blog-grid");
    blogGrid.innerHTML = "";

    const start = (page - 1) * postsPerPage;
    const end = start + postsPerPage;
    const postsToShow = blogPosts.slice(start, end);

    postsToShow.forEach(post => {
      const postEl = document.createElement("div");
      postEl.className = "bg-white rounded-xl overflow-hidden shadow-md hover:shadow-lg transition duration-300";
      postEl.innerHTML = `
        <div class="relative">
          <img src="${post.image}" alt="${post.title}" class="w-full h-48 object-cover">
          <div class="absolute bottom-0 left-0 bg-orange-500 text-white px-3 py-1 text-sm font-semibold">${post.category}</div>
        </div>
        <div class="p-6">
          <h3 class="font-bold text-xl mb-2">${post.title}</h3>
          <p class="text-gray-600 mb-4">${post.summary}</p>
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center">
              <img src="https://randomuser.me/api/portraits/lego/${Math.floor(Math.random() * 10)}.jpg" alt="Author" class="w-8 h-8 rounded-full mr-2">
              <span class="text-sm text-gray-600">${post.author}</span>
            </div>
            <span class="text-sm text-gray-500">${post.date}</span>
          </div>
          ${post.url ? `<a href="${post.url}" target="_blank" rel="noopener noreferrer" class="text-orange-500 text-sm font-semibold hover:underline">Read More</a>` : ''}
        </div>
      `;
      blogGrid.appendChild(postEl);
    });
  }

  function renderPagination() {
    const pagination = document.getElementById("pagination-controls");
    pagination.innerHTML = "";

    const pageCount = Math.ceil(blogPosts.length / postsPerPage);
    for (let i = 1; i <= pageCount; i++) {
      const btn = document.createElement("button");
      btn.textContent = i;
      btn.className = `px-4 py-2 border rounded ${i === currentPage ? 'bg-orange-500 text-white' : 'text-orange-500 border-orange-500'} hover:bg-orange-100`;
      btn.addEventListener("click", () => {
        currentPage = i;
        renderBlogPosts(i);
        renderPagination();
      });
      pagination.appendChild(btn);
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    renderBlogPosts(currentPage);
    renderPagination();
  });
</script>

<script>
  document.getElementById("contact-form").addEventListener("submit", function (e) {
    e.preventDefault();

    const form = e.target;
    const formData = new FormData(form);

    fetch("https://formsubmit.co/ajax/benjaminaugustine24@gmail.com", {
      method: "POST",
      body: formData
    })
    .then(response => {
      if (response.ok) {
        form.reset();
        document.getElementById("thank-you-popup").classList.remove("hidden");
      } else {
        alert("There was a problem sending your message.");
      }
    })
    .catch(error => {
      alert("Error: " + error.message);
    });
  });

  function closePopup() {
    document.getElementById("thank-you-popup").classList.add("hidden");
  }
</script>
<script>
  document.getElementById("newsletter-form").addEventListener("submit", function (e) {
    e.preventDefault(); // stop redirect

    const form = e.target;
    const popup = document.getElementById("newsletter-success");

    // Send form manually
    fetch(form.action, {
      method: "POST",
      body: new FormData(form),
      headers: {
        Accept: "application/json"
      }
    })
    .then(response => {
      if (response.ok) {
        form.reset();
        popup.classList.remove("hidden");
        setTimeout(() => popup.classList.add("hidden"), 4000);
      } else {
        alert("Something went wrong. Try again later.");
      }
    })
    .catch(() => alert("Network error. Please check your connection."));
  });
</script>

<script>
  function toggleFAQ() {
    document.getElementById("faq-content").classList.toggle("hidden");
  }
  function toggleShipping() {
    document.getElementById("shipping-content").classList.toggle("hidden");
  }
  function toggleReturns() {
    document.getElementById("returns-content").classList.toggle("hidden");
  }
  function togglePrivacy() {
    document.getElementById("privacy-content").classList.toggle("hidden");
  }
  function toggleTerms() {
    document.getElementById("terms-content").classList.toggle("hidden");
  }
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const loginBtn = document.getElementById('login-btn');
  const registerBtn = document.getElementById('register-btn');
  const loginModal = document.getElementById('login-modal');
  const registerModal = document.getElementById('register-modal');
  const closeLogin = document.getElementById('close-login');
  const closeRegister = document.getElementById('close-register');
  const showRegister = document.getElementById('show-register');
  const showLogin = document.getElementById('show-login');

  // Open Login
  loginBtn?.addEventListener('click', () => {
    registerModal.classList.add('hidden');
    loginModal.classList.remove('hidden');
  });

  // Open Register
  registerBtn?.addEventListener('click', () => {
    loginModal.classList.add('hidden');
    registerModal.classList.remove('hidden');
  });

  // Switch to Register from Login
  showRegister?.addEventListener('click', () => {
    loginModal.classList.add('hidden');
    registerModal.classList.remove('hidden');
  });

  // Switch to Login from Register
  showLogin?.addEventListener('click', () => {
    registerModal.classList.add('hidden');
    loginModal.classList.remove('hidden');
  });

  // Close Modals
  closeLogin?.addEventListener('click', () => loginModal.classList.add('hidden'));
  closeRegister?.addEventListener('click', () => registerModal.classList.add('hidden'));
});
</script>


<!-- Mobile Bottom Navigation (hidden on md and up) -->
<!-- Mobile Bottom Navigation (cleaned up like dessert.html) -->
<nav class="fixed bottom-0 left-0 w-full flex justify-around items-center py-2 shadow-xl z-50 md:hidden bg-[#EFEFD0] theme-dark:bg-[#1F2937] font-poppins">
  <a href="index.html" class="flex flex-col items-center w-full min-h-[48px] transition active:scale-95 group" aria-label="Home">
    <i class="fas fa-home text-xl group-[.active]:text-orange-500"></i>
    <span class="text-xs mt-1 group-[.active]:text-orange-500 font-chewy">Home</span>
  </a>
  <a href="recipes.html" class="flex flex-col items-center w-full min-h-[48px] transition active:scale-95 group" aria-label="Recipes">
    <i class="fas fa-utensils text-xl group-[.active]:text-orange-500"></i>
    <span class="text-xs mt-1 group-[.active]:text-orange-500 font-chewy">Recipes</span>
  </a>
  <a href="shop.html" class="flex flex-col items-center w-full min-h-[48px] transition active:scale-95 group" aria-label="Shop">
    <i class="fas fa-shopping-cart text-xl group-[.active]:text-orange-500"></i>
    <span class="text-xs mt-1 group-[.active]:text-orange-500 font-chewy">Shop</span>
  </a>
  <a href="dashboard.html" class="flex flex-col items-center w-full min-h-[48px] transition active:scale-95 group" aria-label="Profile">
    <i class="fas fa-user text-xl group-[.active]:text-orange-500"></i>
    <span class="text-xs mt-1 group-[.active]:text-orange-500 font-chewy">Profile</span>
  </a>
</nav>


<!-- End Mobile Bottom Navigation -->

<script type="module">
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { auth } from "./snackinn-firebase.js";

document.addEventListener("DOMContentLoaded", () => {
  const welcomeText = document.getElementById("user-welcome");
  const loginBtn = document.getElementById("login-btn");

  onAuthStateChanged(auth, (user) => {
    if (user) {
      welcomeText.textContent = `Welcome, ${user.displayName || (user.email ? user.email.split('@')[0] : 'User')}`;
      welcomeText.classList.remove("hidden");
      loginBtn.classList.add("hidden");
    } else {
      welcomeText.classList.add("hidden");
      loginBtn.classList.remove("hidden");
    }
  });

  loginBtn?.addEventListener("click", () => {
    const modal = document.getElementById("login-modal");
    if (modal) {
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    }
  });

  const mobileLogoutBtn = document.getElementById("mobile-logout-btn");
  onAuthStateChanged(auth, (user) => {
    if (mobileLogoutBtn) {
      if (user) {
        mobileLogoutBtn.classList.remove("hidden");
      } else {
        mobileLogoutBtn.classList.add("hidden");
      }
    }
  });
});
</script>

<!-- GLOBAL TOGGLE PASSWORD FUNCTION -->
<script>
function togglePassword(inputId, btn) {
  const input = document.getElementById(inputId);
  if (!input) return;
  if (input.type === "password") {
    input.type = "text";
    btn.innerHTML = '<i class="fas fa-eye-slash"></i>';
  } else {
    input.type = "password";
    btn.innerHTML = '<i class="fas fa-eye"></i>';
  }
}
</script>
<script type="module" src="./functions/snackinn-firebase.js"></script>
<script type="module">
  import { logoutUser } from './functions/snackinn-firebase.js';
 
</script>

<script type="module">
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { auth } from "./snackinn-firebase.js";
// Show profile picture in nav if uploaded, else show welcome text
function updateNavProfilePic() {
  const userWelcome = document.getElementById("user-welcome");
  const mobileUserWelcome = document.getElementById("mobile-user-welcome");
  onAuthStateChanged(auth, (user) => {
    if (user) {
      const picUrl = localStorage.getItem(`user_profile_pic_${user.uid}`);
      if (picUrl) {
        if (userWelcome) {
          userWelcome.innerHTML = `<img src="${picUrl}" alt="Profile" class="inline w-8 h-8 rounded-full object-cover border-2 border-orange-500 align-middle" style="vertical-align:middle;" />`;
        }
        if (mobileUserWelcome) {
          mobileUserWelcome.innerHTML = `<img src="${picUrl}" alt="Profile" class="inline w-8 h-8 rounded-full object-cover border-2 border-orange-500 align-middle" style="vertical-align:middle;" />`;
        }
      } else {
        if (userWelcome) userWelcome.textContent = `Welcome, ${user.displayName || user.email}`;
        if (mobileUserWelcome) mobileUserWelcome.textContent = `Welcome, ${user.displayName || user.email}`;
      }
      if (userWelcome) userWelcome.classList.remove("hidden");
      if (mobileUserWelcome) mobileUserWelcome.classList.remove("hidden");
    } else {
      if (userWelcome) userWelcome.classList.add("hidden");
      if (mobileUserWelcome) mobileUserWelcome.classList.add("hidden");
    }
  });
}
updateNavProfilePic();
</script>

<script type="module">
import { initCart, addToCart, removeFromCart, clearCart, loadCart } from './cart-utils.js';



// Initialize the cart
initCart({
  cartCountSelector: '#cart-count',
  cartPopupSelector: '#cart-popup',
  cartSidebarSelector: '#cart-sidebar'
});

// Add to cart handler for snacks on homepage
document.getElementById('snack-grid')?.addEventListener('click', function(e) {
  if (e.target.classList.contains('add-to-cart')) {
    const btn = e.target;
    addToCart(
      btn.getAttribute('data-id'),
      btn.getAttribute('data-name'),
      parseFloat(btn.getAttribute('data-price')),
      btn.getAttribute('data-image')
    );
  }
});

// proceed to checkout (desktop sidebar)
document.getElementById("checkout-btn-sidebar")?.addEventListener("click", () => {
  window.location.href = "checkout.html";
});

// Proceed to checkout (mobile popup)
document.getElementById("checkout-btn-popup")?.addEventListener("click", () => {
  window.location.href = "checkout.html";
});

// Cart open/close logic (desktop and mobile)
const cartBtn = document.getElementById("cart-btn");
if (cartBtn) cartBtn.addEventListener("click", () => {
  if (window.innerWidth >= 768) {
    const sidebar = document.getElementById("cart-sidebar");
    if (sidebar) {
      sidebar.classList.remove("hidden");
      setTimeout(() => {
        sidebar.classList.remove("translate-x-full");
      }, 10);
    }
    document.getElementById("cart-overlay")?.classList.remove("hidden");
  } else {
    const cartPopup = document.getElementById("cart-popup");
    if (cartPopup) cartPopup.classList.remove("hidden");
  }
});
const mobileCartBtn = document.getElementById("mobile-cart-btn");
if (mobileCartBtn) {
  mobileCartBtn.addEventListener("click", () => {
    const cartPopup = document.getElementById("cart-popup");
    if (cartPopup) cartPopup.classList.remove("hidden");
    // Optionally close mobile menu if open
    const enhancedMenu = document.getElementById('enhanced-mobile-menu');
    const enhancedMenuPanel = document.getElementById('enhanced-mobile-menu-panel');
    if (enhancedMenu && enhancedMenuPanel && !enhancedMenu.classList.contains('hidden')) {
      enhancedMenuPanel.classList.add('translate-x-full');
      setTimeout(() => {
        enhancedMenu.classList.add('hidden');
      }, 300);
    }
  });
}
document.getElementById("close-cart-sidebar")?.addEventListener("click", () => {
  const sidebar = document.getElementById("cart-sidebar");
  if (sidebar) {
    sidebar.classList.add("hidden");
    sidebar.classList.add("translate-x-full");
  }
  const cartOverlay = document.getElementById("cart-overlay");
  if (cartOverlay) cartOverlay.classList.add("hidden");
});
document.getElementById("close-cart-popup")?.addEventListener("click", () => {
  const cartPopup = document.getElementById("cart-popup");
  if (cartPopup) cartPopup.classList.add("hidden");
});
const cartOverlay = document.getElementById("cart-overlay");
if (cartOverlay) {
  cartOverlay.addEventListener("click", () => {
    const sidebar = document.getElementById("cart-sidebar");
    if (sidebar) {
      sidebar.classList.add("hidden");
      sidebar.classList.add("translate-x-full");
    }
    cartOverlay.classList.add("hidden");
    const cartPopup = document.getElementById("cart-popup");
    if (cartPopup) cartPopup.classList.add("hidden");
  });
}

// Update both desktop and mobile cart counts
function updateCartCounts() {
  const cart = loadCart();
  const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
  const cartCountElem = document.getElementById('cart-count');
  if (cartCountElem) cartCountElem.textContent = totalItems;
  const mobileCartCountElem = document.getElementById('mobile-cart-count');
  if (mobileCartCountElem) mobileCartCountElem.textContent = totalItems > 0 ? totalItems : "0";
}
window.addEventListener('cartUpdated', updateCartCounts);
window.addEventListener('storage', updateCartCounts);
document.addEventListener('DOMContentLoaded', updateCartCounts);

// Add this after cart initialization
function showToast(message) {
  const toast = document.createElement('div');
  toast.textContent = message;
  toast.className = "fixed bottom-8 right-8 bg-orange-500 text-white px-6 py-3 rounded shadow-lg z-50 animate-bounce";
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 2000);
}

// Attach event listeners to all .add-to-cart buttons on homepage
if (window.location.pathname.endsWith('index.html') || window.location.pathname === '/' || window.location.pathname === '') {
  document.querySelectorAll('.add-to-cart').forEach(btn => {
    btn.addEventListener('click', function() {
      addToCart(
        btn.getAttribute('data-id'),
        btn.getAttribute('data-name'),
        parseFloat(btn.getAttribute('data-price')),
        btn.getAttribute('data-image')
      );
      showToast(`${btn.getAttribute('data-name')} (KSh ${btn.getAttribute('data-price')}) added to cart!`);
    });
  });
}

function attachCartItemHandlers(container) {
  if (!container || container.dataset.listenerAttached === 'true') return;

  container.addEventListener('click', function (e) {
    const id = e.target.getAttribute('data-id');
    let cart = loadCart();

    if (e.target.classList.contains('increase-qty')) {
      const item = cart.find(i => String(i.id) === String(id));
      if (item) {
        item.quantity += 1;
        saveCart(cart);
        renderCart();
      }
    }

    if (e.target.classList.contains('decrease-qty')) {
      const item = cart.find(i => String(i.id) === String(id));
      if (item && item.quantity > 1) {
        item.quantity -= 1;
        saveCart(cart);
        renderCart();
      } else if (item && item.quantity === 1) {
        cart = cart.filter(i => String(i.id) !== String(id));
        saveCart(cart);
        renderCart();
      }
    }

    if (e.target.classList.contains('remove-item')) {
      cart = cart.filter(i => String(i.id) !== String(id));
      saveCart(cart);
      renderCart();
    }
  });

  // üõ°Ô∏è Mark that it's attached
  container.dataset.listenerAttached = 'true';
}

document.addEventListener('DOMContentLoaded', function () {
  // ‚úÖ Sidebar cart-items (desktop view)
  const sidebarCartItems = document.querySelector('#cart-sidebar #cart-items');
  if (sidebarCartItems) attachCartItemHandlers(sidebarCartItems);

  // ‚úÖ Popup cart-items (mobile view)
  const popupCartItems = document.querySelector('#cart-popup #cart-items');
  if (popupCartItems) attachCartItemHandlers(popupCartItems);
});



</script>

</body>
</html>
